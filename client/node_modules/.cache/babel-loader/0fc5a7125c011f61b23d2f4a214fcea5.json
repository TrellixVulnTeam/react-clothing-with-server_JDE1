{"ast":null,"code":"import _objectSpread from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Route}from\"react-router-dom\";import{connect}from\"react-redux\";import{updateCollections as _updateCollections}from\"../../redux/shop/shop.actions\";import WithSpinner from\"../../components/with-spinner/with-spinner.component\";import{firestore,convertCollectionsSnapshotToMap}from\"../../firebase/firebase.utils\";import\"./shop.styles.scss\";import CollectionsOverview from\"../../components/collections-overview/collections-overview.component\";import CollectionPage from\"../collection/collection.component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CollectionsOverviewwithSpinner=WithSpinner(CollectionsOverview);var CollectionPageWithSpinner=WithSpinner(CollectionPage);var ShopPage=/*#__PURE__*/function(_Component){_inherits(ShopPage,_Component);var _super=_createSuper(ShopPage);function ShopPage(){var _this;_classCallCheck(this,ShopPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true};_this.unsubscribeFromSnapshot=null;return _this;}_createClass(ShopPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var updateCollections=this.props.updateCollections;var collectionRef=firestore.collection(\"collections\");this.unsubscribeFromSnapshot=collectionRef.onSnapshot(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(snapshot){var collectionsMap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionsMap=convertCollectionsSnapshotToMap(snapshot);updateCollections(collectionsMap);_this2.setState({loading:false});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"render\",value:function render(){var match=this.props.match;var loading=this.state.loading;return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-page\",children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"\".concat(match.path),render:function render(props){return/*#__PURE__*/_jsx(CollectionsOverviewwithSpinner,_objectSpread({isLoading:loading},props));}}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/:collectionId\"),render:function render(props){return/*#__PURE__*/_jsx(CollectionPageWithSpinner,_objectSpread({isLoading:loading},props));}})]});}}]);return ShopPage;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateCollections:function updateCollections(collectionsMap){return dispatch(_updateCollections(collectionsMap));}};};export default connect(null,mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["/Users/wellnaidyadrian/Visualstudio/neagoie/react/clothing-shop/src/pages/shop/shop.component.js"],"names":["React","Component","Route","connect","updateCollections","WithSpinner","firestore","convertCollectionsSnapshotToMap","CollectionsOverview","CollectionPage","CollectionsOverviewwithSpinner","CollectionPageWithSpinner","ShopPage","state","loading","unsubscribeFromSnapshot","props","collectionRef","collection","onSnapshot","snapshot","collectionsMap","setState","match","path","mapDispatchToProps","dispatch"],"mappings":"suCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,OAASC,iBAAiB,GAAjBA,CAAAA,kBAAT,KAAkC,+BAAlC,CACA,MAAOC,CAAAA,WAAP,KAAwB,sDAAxB,CAEA,OACEC,SADF,CAEEC,+BAFF,KAGO,+BAHP,CAKA,MAAO,oBAAP,CAEA,MAAOC,CAAAA,mBAAP,KAAgC,sEAAhC,CACA,MAAOC,CAAAA,cAAP,KAA2B,oCAA3B,C,wFAEA,GAAMC,CAAAA,8BAA8B,CAAGL,WAAW,CAACG,mBAAD,CAAlD,CACA,GAAMG,CAAAA,yBAAyB,CAAGN,WAAW,CAACI,cAAD,CAA7C,C,GAEMG,CAAAA,Q,mUACJC,K,CAAQ,CACNC,OAAO,CAAE,IADH,C,OAIRC,uB,CAA0B,I,qEAE1B,4BAAoB,iBAClB,GAAQX,CAAAA,iBAAR,CAA8B,KAAKY,KAAnC,CAAQZ,iBAAR,CACA,GAAMa,CAAAA,aAAa,CAAGX,SAAS,CAACY,UAAV,CAAqB,aAArB,CAAtB,CACA,KAAKH,uBAAL,CAA+BE,aAAa,CAACE,UAAd,0FAC7B,iBAAOC,QAAP,qIACQC,cADR,CACyBd,+BAA+B,CAACa,QAAD,CADxD,CAEEhB,iBAAiB,CAACiB,cAAD,CAAjB,CACA,MAAI,CAACC,QAAL,CAAc,CAAER,OAAO,CAAE,KAAX,CAAd,EAHF,sDAD6B,+DAA/B,CAOD,C,sBAED,iBAAS,CACP,GAAQS,CAAAA,KAAR,CAAkB,KAAKP,KAAvB,CAAQO,KAAR,CACA,GAAQT,CAAAA,OAAR,CAAoB,KAAKD,KAAzB,CAAQC,OAAR,CACA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,WAAKS,KAAK,CAACC,IAAX,CAFN,CAGE,MAAM,CAAE,gBAACR,KAAD,qBACN,KAAC,8BAAD,gBAAgC,SAAS,CAAEF,OAA3C,EAAwDE,KAAxD,EADM,EAHV,EADF,cAQE,KAAC,KAAD,EACE,IAAI,WAAKO,KAAK,CAACC,IAAX,kBADN,CAEE,MAAM,CAAE,gBAACR,KAAD,qBACN,KAAC,yBAAD,gBAA2B,SAAS,CAAEF,OAAtC,EAAmDE,KAAnD,EADM,EAFV,EARF,GADF,CAiBD,C,sBAvCoBf,S,EA0CvB,GAAMwB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACxCtB,iBAAiB,CAAE,2BAACiB,cAAD,QACjBK,CAAAA,QAAQ,CAACtB,kBAAiB,CAACiB,cAAD,CAAlB,CADS,EADqB,CAAf,EAA3B,CAKA,cAAelB,CAAAA,OAAO,CAAC,IAAD,CAAOsB,kBAAP,CAAP,CAAkCb,QAAlC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { updateCollections } from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../components/with-spinner/with-spinner.component\";\n\nimport {\n  firestore,\n  convertCollectionsSnapshotToMap,\n} from \"../../firebase/firebase.utils\";\n\nimport \"./shop.styles.scss\";\n\nimport CollectionsOverview from \"../../components/collections-overview/collections-overview.component\";\nimport CollectionPage from \"../collection/collection.component\";\n\nconst CollectionsOverviewwithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nclass ShopPage extends Component {\n  state = {\n    loading: true,\n  };\n\n  unsubscribeFromSnapshot = null;\n\n  componentDidMount() {\n    const { updateCollections } = this.props;\n    const collectionRef = firestore.collection(\"collections\");\n    this.unsubscribeFromSnapshot = collectionRef.onSnapshot(\n      async (snapshot) => {\n        const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\n        updateCollections(collectionsMap);\n        this.setState({ loading: false });\n      }\n    );\n  }\n\n  render() {\n    const { match } = this.props;\n    const { loading } = this.state;\n    return (\n      <div className=\"shop-page\">\n        <Route\n          exact\n          path={`${match.path}`}\n          render={(props) => (\n            <CollectionsOverviewwithSpinner isLoading={loading} {...props} />\n          )}\n        />\n        <Route\n          path={`${match.path}/:collectionId`}\n          render={(props) => (\n            <CollectionPageWithSpinner isLoading={loading} {...props} />\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateCollections: (collectionsMap) =>\n    dispatch(updateCollections(collectionsMap)),\n});\n\nexport default connect(null, mapDispatchToProps)(ShopPage);\n"]},"metadata":{},"sourceType":"module"}